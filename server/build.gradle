/*
 * This build file was generated by the Gradle 'init' task.
 *
 * This generated file contains a commented-out sample Java project to get you started.
 * For more details take a look at the Java Quickstart chapter in the Gradle
 * user guide available at https://docs.gradle.org/4.4.1/userguide/tutorial_java_projects.html
 */


apply plugin: 'java'
group = 'com.jmessenger.server'
sourceCompatibility = 1.7
version = '1.0'

repositories {
    mavenCentral()
}

sourceSets {
    main {
        java {
            srcDir 'src'
        }
    }
}

sourceSets.all { set ->
    def jarTask = task("${set.name}Jar", type: Jar) {
        baseName = "$set.name"
        from set.output
    }

    artifacts {
        archives jarTask
    }

}
dependencies {
    testCompile group: 'junit', name: 'junit', version: '4.+'
    compile project(':model')
}
jar {
    from { configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } }
    from sourceSets.test.output
    manifest {
        attributes 'Implementation-Title': 'JMessengerServer',
                'Implementation-Version': version,
                'Main-Class': 'com.jmessenger.broker.JMessengerBroker'
    }
    exclude 'META-INF/.RSA', 'META-INF/.SF','META-INF/*.DSA'
}